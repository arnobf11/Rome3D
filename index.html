<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üåå 3D Lottery Generator - Space Edition</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at 20% 20%, #0b0f25, #000);
      color: #e0e6ff;
      text-align: center;
      padding: 40px;
    }
    h1 { font-size: 2em; color: #8ab4ff; text-shadow: 0 0 15px #4c8cff; margin-bottom: 20px; }
    .input-section {
      background: rgba(20,25,45,0.85);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 0 20px rgba(100,150,255,0.3);
      display: inline-block;
      border: 1px solid rgba(100,150,255,0.2);
    }
    label { font-weight: 600; color: #b3c4ff; }
    input[type="text"] {
      padding: 10px; font-size: 1.1em; width: 160px; text-align: center;
      border-radius: 10px; border: 1px solid #4c8cff; background: #0b0f25; color: #fff;
      margin: 10px 0; outline: none; box-shadow: 0 0 10px rgba(76,140,255,0.2); transition: 0.3s;
    }
    .button-row { display:flex; justify-content:center; gap:10px; margin-top:10px; flex-wrap:wrap; }
    button {
      background: linear-gradient(135deg,#4c8cff,#7a5cff);
      color: white; border: none; padding: 10px 14px; border-radius: 12px;
      cursor:pointer; font-weight:600; transition:0.2s;
    }
    button:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(122,92,255,0.6); }
    .result-section { margin-top:40px; max-width:720px; margin-left:auto; margin-right:auto; text-align:left; }
    #summary {
      background: rgba(25,30,60,0.8); border-radius:10px; padding:12px; color:#b0c3ff;
      box-shadow: 0 0 10px rgba(76,140,255,0.3);
    }
    #normalResult {
      background: rgba(10,15,35,0.8); padding:12px; border-radius:12px; margin-top:15px;
      white-space: pre-wrap; line-height:1.6; font-family: monospace; color:#a8bfff;
      box-shadow: 0 0 12px rgba(80,120,255,0.2);
    }
    #copyBtn { display:none; margin-top:10px; background: linear-gradient(135deg,#00d4ff,#007bff); }
    #guideBtn { position:absolute; top:20px; right:20px; background:linear-gradient(135deg,#4c8cff,#00d4ff); padding:10px 18px; border-radius:12px; border:none; font-weight:600; color:white; cursor:pointer; transition:0.3s; }
    #guideBtn:hover { transform: scale(1.05); box-shadow: 0 0 12px rgba(0,200,255,0.6); }
  </style>
</head>
<body>
  <button id="guideBtn" onclick="window.location.href='guide.html'">üìò User Guide</button>
  <h1>üåå 3D Lottery Generator - By Rome</h1>

  <div class="input-section">
    <label>Enter digits (3‚Äì10)</label><br>
    <input type="text" id="digits" maxlength="12" placeholder="·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∫·Ä∑·Äï·Ä´"><br>
    <label><input type="checkbox" id="allowRepeat"> Allow Repeats</label><br>
    <div class="button-row">
      <button id="generate">Generate</button>
      <button id="clearBtn">Clear</button>
    </div>
  </div>

  <div class="result-section">
    <h2>Results</h2>
    <p id="summary"></p>
    <div id="normalResult"></div>
    <button id="copyBtn">üìã Copy Results</button>
  </div>

  <script>
    const copyBtn = document.getElementById("copyBtn");
    const clearBtn = document.getElementById("clearBtn");

    document.getElementById("generate").addEventListener("click", () => {
      const digits = document.getElementById("digits").value.trim();
      const allowRepeat = document.getElementById("allowRepeat").checked;

      if (!digits) return alert('Please enter input.');

      if (digits === "·ÄÅ·ÄΩ") return displayKhweResults();
      if (digits === "·Ä°·Äï·Ä∞·Ä∏") return displayApueResults();

      const patMatch = digits.match(/^([0-9]+)·Äï·Äê·Ä∫$/);
      if (patMatch) return displayPatResults(patMatch[1]);

      const teitMatch = digits.match(/^([0-9])·Äë·Ä≠·Äï·Ä∫$/);
      if (teitMatch) return displayTeitResults(teitMatch[1], allowRepeat);

      const lelMatch = digits.match(/^([0-9])·Äú·Äö·Ä∫$/);
      if (lelMatch) return displayLelResults(lelMatch[1], allowRepeat);

      const peitMatch = digits.match(/^([0-9])·Äï·Ä≠·Äê·Ä∫$/);
      if (peitMatch) return displayPeitResults(peitMatch[1], allowRepeat);

      if (digits.length < 3 || digits.length > 10) {
        alert("Please enter between 3 and 10 digits, or type '·ÄÅ·ÄΩ' / '·Ä°·Äï·Ä∞·Ä∏' / '1·Äï·Äê·Ä∫' / '3·Äë·Ä≠·Äï·Ä∫' / '5·Äú·Äö·Ä∫' / '4·Äï·Ä≠·Äê·Ä∫'.");
        return;
      }

      const result = generate3D(digits, allowRepeat);
      displayResults(result);
    });

    clearBtn.addEventListener("click", clearAll);

    // --- Generate 3D ---
    function generate3D(digits, allowRepeat) {
      const arr = digits.split('');
      let normal = [];

      if (allowRepeat) {
        for (let a of arr)
          for (let b of arr)
            for (let c of arr)
              normal.push(a + b + c);
      } else {
        for (let i = 0; i < arr.length; i++)
          for (let j = 0; j < arr.length; j++)
            for (let k = 0; k < arr.length; k++)
              if (i !== j && j !== k && i !== k)
                normal.push(arr[i] + arr[j] + arr[k]);
      }
      return { input: digits, allowRepeat, normalCount: normal.length, normal };
    }

    // --- Display Normal / Detect triple ---
    function displayResults({input, allowRepeat, normalCount, normal}) {
      const triples = normal.filter(x => x[0] === x[1] && x[1] === x[2]);
      const others = normal.filter(x => !(x[0] === x[1] && x[1] === x[2]));

      let displayText = "--- Rome 3D ---\n";
      if (triples.length > 0) {
        displayText += `üî• Triple (${triples.length}) ‚Üí ${triples.join(", ")}\n\n`;
      }
      displayText += others.join(", ");

      document.getElementById("summary").innerText =
        `Input: ${input}\nAllow Repeat: ${allowRepeat ? "Yes" : "No"}\nTotal: ${normalCount} sets`;
      document.getElementById("normalResult").innerText = displayText;
      copyBtn.style.display = "inline-block";
      copyBtn.onclick = () => copyToClipboard(displayText);
    }

    // --- ·Äë·Ä≠·Äï·Ä∫ Mode ---
    function displayTeitResults(d, allowRepeat) {
      const results = [];
      for (let j = 0; j <= 9; j++) {
        for (let k = 0; k <= 9; k++) {
          if (allowRepeat || (d !== j.toString() && j !== k && d !== k.toString())) {
            results.push(`${d}${j}${k}`);
          }
        }
      }
      showModeResults(`${d}·Äë·Ä≠·Äï·Ä∫`, results, allowRepeat);
    }

    // --- ·Äú·Äö·Ä∫ Mode ---
    function displayLelResults(d, allowRepeat) {
      const results = [];
      for (let i = 0; i <= 9; i++) {
        for (let k = 0; k <= 9; k++) {
          if (allowRepeat || (i !== k && i.toString() !== d && k.toString() !== d)) {
            results.push(`${i}${d}${k}`);
          }
        }
      }
      showModeResults(`${d}·Äú·Äö·Ä∫`, results, allowRepeat);
    }

    // --- ·Äï·Ä≠·Äê·Ä∫ Mode ---
    function displayPeitResults(d, allowRepeat) {
      const results = [];
      for (let i = 0; i <= 9; i++) {
        for (let j = 0; j <= 9; j++) {
          if (allowRepeat || (i !== j && i.toString() !== d && j.toString() !== d)) {
            results.push(`${i}${j}${d}`);
          }
        }
      }
      showModeResults(`${d}·Äï·Ä≠·Äê·Ä∫`, results, allowRepeat);
    }

    // --- ·ÄÅ·ÄΩ Mode (XYX) ---
    function displayKhweResults() {
      const results = [];
      for (let x = 0; x <= 9; x++)
        for (let y = 0; y <= 9; y++)
          if (x !== y) results.push(`${x}${y}${x}`);
      document.getElementById("summary").innerText = `Mode: ·ÄÅ·ÄΩ (XYX)\nTotal: ${results.length}`;
      document.getElementById("normalResult").innerText = results.join(", ");
      copyBtn.style.display = "inline-block";
      copyBtn.onclick = () => copyToClipboard(results.join(", "));
    }

    // --- ·Ä°·Äï·Ä∞·Ä∏ Mode (XXY + XYY) group separate ---
    function displayApueResults() {
      const xxy = [];
      const xyy = [];
      for (let x = 0; x <= 9; x++)
        for (let y = 0; y <= 9; y++)
          if (x !== y) {
            xxy.push(`${x}${x}${y}`);
            xyy.push(`${x}${y}${y}`);
          }

      const total = xxy.length + xyy.length;
      let displayText =
        `--- ·Ä°·Äï·Ä∞·Ä∏ Mode ---\nTotal: ${total}\n\nüåü XXY (${xxy.length}) ‚Üí ${xxy.join(", ")}\n\nüåô XYY (${xyy.length}) ‚Üí ${xyy.join(", ")}`;

      document.getElementById("summary").innerText = `Mode: ·Ä°·Äï·Ä∞·Ä∏ (XXY + XYY)\nTotal: ${total}`;
      document.getElementById("normalResult").innerText = displayText;
      copyBtn.style.display = "inline-block";
      copyBtn.onclick = () => copyToClipboard(displayText);
    }

    // --- ·Äï·Äê·Ä∫ Mode ---
    function displayPatResults(digitStr) {
      const digitsToMatch = digitStr.split('');
      const results = [];
      for (let i = 0; i <= 9; i++)
        for (let j = 0; j <= 9; j++)
          for (let k = 0; k <= 9; k++) {
            const s = `${i}${j}${k}`;
            if (digitsToMatch.some(d => s.includes(d))) results.push(s);
          }
      const unique = Array.from(new Set(results)).sort();
      showModeResults(`${digitStr}·Äï·Äê·Ä∫`, unique, true);
    }

    // Helper for displaying with triple check
    function showModeResults(modeName, results, allowRepeat) {
      const triples = results.filter(x => x[0] === x[1] && x[1] === x[2]);
      const others = results.filter(x => !(x[0] === x[1] && x[1] === x[2]));

      let displayText = `Mode: ${modeName}\nAllow Repeat: ${allowRepeat ? "Yes" : "No"}\nTotal: ${results.length}\n\n`;
      if (triples.length > 0) {
        displayText += `üî• Triple (${triples.length}) ‚Üí ${triples.join(", ")}\n\n`;
      }
      displayText += others.join(", ");

      document.getElementById("summary").innerText = `Mode: ${modeName}\nAllow Repeat: ${allowRepeat ? "Yes" : "No"}\nTotal: ${results.length}`;
      document.getElementById("normalResult").innerText = displayText;
      copyBtn.style.display = "inline-block";
      copyBtn.onclick = () => copyToClipboard(displayText);
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.innerText = "‚úÖ Copied!";
        setTimeout(() => copyBtn.innerText = "üìã Copy Results", 1500);
      });
    }

    function clearAll() {
      document.getElementById("digits").value = "";
      document.getElementById("allowRepeat").checked = false;
      document.getElementById("summary").innerText = "";
      document.getElementById("normalResult").innerText = "";
      copyBtn.style.display = "none";
    }
  </script>
</body>
</html>
